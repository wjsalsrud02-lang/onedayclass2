{% extends "base.html" %}
{% block content %}
<div class="class-detail">
  <div class="class-left">
    <img class="main-image"
         src="https://images.unsplash.com/photo-1606890737304-57a1ca8a5b62?auto=format&fit=crop&w=900&q=80">
    <h1 class="class-name" id="classTitle">
        어버이날 케이크 만들기
    </h1>
  </div>

  <aside class="class-right">
    <div class="schedule-card">
      <h6 class="small-title">클래스 일정</h6>
      <input
        type="date"
        class="date-input"
        id="selectedDate"
      >

      <div class="tag success2">🔈 최소 3일 전 예약이 필요한 클래스 입니다</div>

      <div class="note">
        예약 전 일정 조율이 필요한 클래스예요.<br>
        문의하기를 통해 강사님께 채팅 또는
        원하는 날짜로 개설 요청을 드려보세요!
      </div>

      <div class="price">80,000 원 / 1인</div>

        <button class="btn-apply" onclick="goToReservation()">
        클래스 신청하기
      </button>

      <div class="small-actions">
        <button class="btn-ghost">위시리스트</button>
        <button class="btn-ghost">문의하기</button>
      </div>
    </div>
  </aside>
</div>

<section class="class-tab-section">
  <ul class="tab_menu">
    <li class="active">클래스 소개</li>
    <li>커리큘럼</li>
    <li>호스트 소개</li>
    <li>위치</li>
    <li>후기</li>
    <li>문의</li>
  </ul>

 <div class="tabcontent active">
  <h1>클래스 소개</h1>
  <p>
    해당 클래스는 사전에 조율이 완료된 단체클래스 결제 페이지입니다. <br>
    관련자 외 결제 시, 환불이 불가하오니 주의 부탁드립니다.
  </p>

  <div class="class-info">
      <h5>어버이날 케이크 만들기 클래스</h5>
<br><br>
<p>-동물성 생크림이용<br>
-기초아이싱<br>
-생화로케이크 꾸미기<br>
-박스 및 포장용품 제공</p>
  </div>

  <div class="manager-info">
    <h1>담당 매니저 이소희</h1>
    <p>📞 010-1234-5678</p>
  </div>
</div>

<div class="tabcontent">
    <h1>커리큘럼</h1>
  <p>- 소요시간 : 1시간 30분</p>
    <br><br><br>
    <div>
        <h1>step.1 기초 아이싱</h1><br>
    <img src="https://firebasestorage.googleapis.com/v0/b/mochaclass-intro-web-4e0c0.appspot.com/o/FCMImages%2F1682306206913_636a51a6072c7e77fad3a3f5?alt=media&token=4a6337a4-bd0f-4022-a739-45b4d4d603eb"
    style="width: 600px; height: 800px;">
    </div>
    <br><br>
    <div>
        <h1>step.2 생화 꾸미기</h1><br>
     <img src="https://firebasestorage.googleapis.com/v0/b/mochaclass-intro-web-4e0c0.appspot.com/o/FCMImages%2F1682306191617_636a51a6072c7e77fad3a3f5?alt=media&token=74cdadba-a95b-4804-afbe-1f98c07d836a"
     style="width: 600px; height: 800px;">
    </div>
    <br><br>
    <div>
        <h1>step.3 포장하기</h1><br>
        <img src="https://firebasestorage.googleapis.com/v0/b/mochaclass-intro-web-4e0c0.appspot.com/o/FCMImages%2F1682306129963_636a51a6072c7e77fad3a3f5?alt=media&token=15710747-d0f5-411a-b8d8-02cc4fff8e1d"
        style="width: 600px; height: 800px;">
    </div>
</div>

  <div class="tabcontent">
  <h1>호스트 소개</h1>
  <div class="class-info">
      <div class="host-wrapper">
        <div class="host-box">
          <img src="https://media-cdn.tripadvisor.com/media/photo-s/17/d0/fd/9d/caption.jpg">
          <div>
            <h5><a href="#">채널 바로가기</a></h5>
            <p>모카클래스 매니저</p>
          </div>
        </div>
      </div>
    </div>
  <p>- 전달드린 견적서 및 수업 개요서 참조</p>
</div>

  <div class="tabcontent">
   <h1>위치</h1>
      <p>- 대한민국 서울특별시 광진구 군자동 면목로 12</p>
      <br><br><br>

<h1>제공 사항</h1>

• 와이파이를 제공해요
<br><br>
• 주차 공간이 있어요
<br><br>
• 간단한 음료 및 다과를 제공해요
<br><br>
• 포장 용기를 제공해요
<br><br>
• 포토존이 있어요
<br><br>
• 앞치마 및 장갑을 제공해요
<br><br><br>
<h1>유의 사항</h1>

• 손세정제가 비치 되어있어요
<br><br>
• 실내 소독을 해요
  </div>
  <div class="tabcontent">
    <h1>후기</h1>
      <div class="class-info">
          아직 등록된 후기가 없습니다.
      </div>
  </div>
  <div class="tabcontent">
    <h1>문의</h1>
      <div class="class-info">
          궁금한 사항이나 클래스 일정에 대해 문의해 주세요!<br><br>
          <a href="/qna">▶️Q&A 질문하러 가기</a>
      </div>
  </div>
</section>
<script>
const tabMenu = document.querySelectorAll('.tab_menu li');
const tabContent = document.querySelectorAll('.tabcontent');

tabMenu.forEach((tm, i) => {
  tm.addEventListener('click', () => {
    tabMenu.forEach(item => item.classList.remove('active'));
    tabContent.forEach(tc => tc.classList.remove('active'));

    tm.classList.add('active');
    tabContent[i].classList.add('active');
  });
});

function getToday() {
  const today = new Date();
  const yyyy = today.getFullYear();
  const mm = String(today.getMonth() + 1).padStart(2, '0');
  const dd = String(today.getDate()).padStart(2, '0');
  return `${yyyy}-${mm}-${dd}`;
}

const dateInput = document.getElementById("selectedDate");
const today = getToday();

dateInput.value = today;
dateInput.min = today;

function goToReservation() {
  const selectedDate = dateInput.value;

  if (!selectedDate) {
    alert("날짜를 선택해주세요.");
    return;
  }

  const classTitle = document
    .getElementById("classTitle")
    .innerText
    .trim();

  location.href =
    `/reservations/new?date=${selectedDate}&class_name=${encodeURIComponent(classTitle)}`;
}
</script>

{% endblock %}
